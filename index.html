<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>SmartCreative Sprint Form</title>
  <link rel="stylesheet" href="dist/output.css" />
</head>
<body class="bg-gray-100 font-sans">
  <!-- コンテナ -->
  <div class="max-w-3xl mx-auto py-10 px-4">
    <!-- タイトル -->
    <h1 class="text-2xl font-bold bg-blue-600 text-white py-3 px-6 rounded">
      提案書作成プロセスデモ – 生成AI × 従来型プログラム
    </h1>

    <!-- ========== STEP NAVIGATION ========== -->
    <div id="steps" class="flex justify-between mt-8 mb-6">
      <div class="step-item step-active">1. パラメータ</div>
      <div class="step-item">2. 過去事例</div>
      <div class="step-item">3. AI生成</div>
    </div>

    <!-- ========== STEP 1 ========== -->
    <form id="step1" class="bg-white p-6 rounded shadow">
      <h2 class="font-semibold mb-4 text-lg">お客様情報をご入力ください</h2>
      
      <p class="text-sm text-gray-600 mb-4">
        <span class="text-red-500">*</span> は必須項目です
      </p>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium mb-1">会社名 <span class="text-red-500">*</span></label>
          <input type="text" name="company" class="form-input" placeholder="株式会社○○" required>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">ご担当者名 <span class="text-red-500">*</span></label>
          <input type="text" name="name" class="form-input" placeholder="山田 太郎" required>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">メールアドレス <span class="text-red-500">*</span></label>
          <input type="email" name="email" class="form-input" placeholder="example@company.jp" required>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">電話番号</label>
          <input type="tel" name="phone" class="form-input" placeholder="03-1234-5678">
        </div>

        <!-- 📱 LINE通知セクション（新規追加） -->
        <div class="col-span-2 bg-blue-50 p-4 rounded-lg border border-blue-200">
          <h3 class="text-md font-semibold text-blue-800 mb-3">📱 通知設定（任意）</h3>
          
          <div class="flex items-center mb-3">
            <input type="checkbox" id="line_notify" name="line_notify" value="yes" class="mr-2">
            <label for="line_notify" class="text-sm font-medium">LINEでも通知を受け取る</label>
          </div>
          
          <div id="line_section" class="hidden">
            <label class="block text-sm font-medium mb-1">LINE ID</label>
            <input type="text" name="line_id" class="form-input mb-2" placeholder="@abc123 または URL">
            <div class="text-xs text-gray-600 bg-white p-2 rounded border">
              💡 <strong>LINE IDがわからない場合：</strong><br>
              1. <a href="#" onclick="showQR()" class="text-blue-600 underline">こちらのQRコード</a>をスキャンして友だち追加<br>
              2. 自動返信でLINE IDをお知らせします<br>
              3. そのIDを上記に入力してください
            </div>
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium mb-1">従業員規模</label>
          <select name="employees" class="form-select">
            <option value="">選択してください</option>
            <option value="1-50名">1-50名</option>
            <option value="51-100名">51-100名</option>
            <option value="101-500名">101-500名</option>
            <option value="501名以上">501名以上</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">業界</label>
          <select name="industry" class="form-select">
            <option value="">選択してください</option>
            <option value="製造業">製造業</option>
            <option value="小売業">小売業</option>
            <option value="サービス業">サービス業</option>
            <option value="IT・通信業">IT・通信業</option>
            <option value="印刷・出版業">印刷・出版業</option>
            <option value="不動産業">不動産業</option>
            <option value="その他">その他</option>
          </select>
        </div>
        <div class="col-span-2">
          <label class="block text-sm font-medium mb-1">解決したい課題（複数選択可）</label>
          <select name="challenges" class="form-select">
            <option value="">選択してください</option>
            <option value="業務効率化">業務効率化・自動化</option>
            <option value="コスト削減">コスト削減</option>
            <option value="売上向上">売上・集客向上</option>
            <option value="人材不足">人材不足の解消</option>
            <option value="DX推進">DX推進・デジタル化</option>
            <option value="その他">その他</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">ご予算</label>
          <select name="budget" class="form-select">
            <option value="">選択してください</option>
            <option value="100万円以内">100万円以内</option>
            <option value="100-500万円">100-500万円</option>
            <option value="500-1000万円">500-1000万円</option>
            <option value="1000万円以上">1000万円以上</option>
            <option value="未定">未定</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">導入希望時期</label>
          <select name="timeline" class="form-select">
            <option value="">選択してください</option>
            <option value="1ヶ月以内">1ヶ月以内</option>
            <option value="3ヶ月以内">3ヶ月以内</option>
            <option value="6ヶ月以内">6ヶ月以内</option>
            <option value="1年以内">1年以内</option>
            <option value="未定">未定</option>
          </select>
        </div>
        <div class="col-span-2">
          <label class="block text-sm font-medium mb-1">詳細・ご要望</label>
          <textarea name="details" rows="3" class="form-input" 
            placeholder="具体的な課題や実現したいことをご記入ください"></textarea>
        </div>
      </div>

      <!-- ボタン -->
      <div class="mt-6 flex justify-end space-x-3">
        <button type="reset" class="btn-gray">リセット</button>
        <button id="next1" type="button" class="btn-blue">次へ</button>
      </div>
    </form>

    <!-- ========== STEP 2 (非表示) ========== -->
    <div id="step2" class="hidden bg-white p-6 rounded shadow">
      <!-- 検索中バー -->
      <h2 class="font-semibold mb-4">① 提案パターン別の過去事例検索</h2>
      <progress id="progress-search" class="w-full h-3"></progress>
      <pre id="result-search" class="mt-4 text-sm bg-gray-50 p-3 rounded"></pre>

      <div class="flex justify-between mt-6">
        <button id="back2" class="btn-gray">前へ</button>
        <button id="next2" class="btn-blue">次へ</button>
      </div>
    </div>

    <!-- ========== STEP 3 (非表示) ========== -->
    <div id="step3" class="hidden bg-white p-6 rounded shadow">
      <h2 class="font-semibold mb-4">② AI がカスタマイズ提案作成</h2>
      <progress id="progress-ai" class="w-full h-3"></progress>
      <pre id="result-ai" class="mt-4 text-sm bg-yellow-50 p-3 rounded"></pre>

      <button id="submit" class="btn-blue mt-6 float-right">
        提案書を送信
      </button>
    </div>
  </div>

  <!-- QRコードモーダル -->
  <div id="qr-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-white p-6 rounded-lg max-w-md mx-4">
      <h3 class="text-lg font-semibold mb-4 text-center">🤖 SmartCreative DX 公式LINE</h3>
      <div class="text-center mb-4">
        <div class="w-48 h-48 bg-gray-100 mx-auto flex items-center justify-center border rounded">
          <span class="text-gray-500">QRコード<br>（LINE公式アカウント作成後に設置）</span>
        </div>
      </div>
      <p class="text-sm text-gray-600 mb-4 text-center">
        スキャン後、自動返信でLINE IDをお知らせします
      </p>
      <button onclick="closeQR()" class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700">
        閉じる
      </button>
    </div>
  </div>

  <!-- Tailwind カスタムボタン Utility -->
  <style>
    .btn-blue { @apply bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700; }
    .btn-gray { @apply bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400; }
    .form-select { @apply w-full border-gray-300 rounded px-3 py-2; }
    .step-item { @apply text-sm flex-1 text-center border-b-2 border-gray-300 py-2; }
    .step-active { @apply font-bold border-blue-600 text-blue-600; }
    .form-input { 
      @apply w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent; 
    }
  </style>

  <!-- ロジック(JS) -->
  <script>
    // DOMが読み込まれてから実行
    document.addEventListener('DOMContentLoaded', function() {
      // LINE通知チェックボックスの制御
      const lineNotify = document.getElementById('line_notify');
      if (lineNotify) {
        lineNotify.addEventListener('change', function() {
          const lineSection = document.getElementById('line_section');
          if (this.checked) {
            lineSection.classList.remove('hidden');
          } else {
            lineSection.classList.add('hidden');
            document.querySelector('input[name="line_id"]').value = '';
          }
        });
      }
    });

    // QRコードモーダル表示
    function showQR() {
      document.getElementById('qr-modal').classList.remove('hidden');
      document.getElementById('qr-modal').classList.add('flex');
    }

    // QRコードモーダル非表示
    function closeQR() {
      document.getElementById('qr-modal').classList.add('hidden');
      document.getElementById('qr-modal').classList.remove('flex');
    }
  </script>
  <script src="main.js"></script>
</body>
</html>